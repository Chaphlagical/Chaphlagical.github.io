---
title: 2D图形的光栅化
tags: 计算机图形学
article_header:
  type: cover
  image:
    src: /assets/images/embed.jpg
---

<!--more-->

## (一) 2D数字图像及光栅显示器

### 1、2D图像

![image-20200227105947514](/assets/images/2D图形的光栅化.assets/image-20200227105947514.png)

### 2、像素和光栅

* 像素（pixels）：图像的基本单元
* 光栅（raster）：像素的阵列

![image-20200227110045292](/assets/images/2D图形的光栅化.assets/image-20200227110045292.png)

### 3、光栅显示器/数字图像的数学模型

* 栅格图、点阵图
* 像素构成的矩阵：连续空间的离散采样
	* 矩阵的每个元素成为片元
	* 片元赋予了颜色后称为像素

![image-20200227110251577](/assets/images/2D图形的光栅化.assets/image-20200227110251577.png)

### 4、显示设备

#### (1) 阴极射线显像管显示器（CRT）

逐个将点打在屏幕上的相应位置

* 逐行逐列扫描

<img src="/assets/images/2D图形的光栅化.assets/image-20200227110436089.png" alt="image-20200227110436089" style="zoom:50%;" />

#### (2) 彩色CRT显示器

<img src="/assets/images/2D图形的光栅化.assets/image-20200227110458983.png" alt="image-20200227110458983" style="zoom:50%;" />

#### (3) 平板显示器

* 平板显示器
	* LED发光二极管
	* LCD液晶显示器
	* PDP等离子显示器
* 优势：无几何失真、无闪烁、低耗、辐射小

<img src="/assets/images/2D图形的光栅化.assets/image-20200227110631828.png" alt="image-20200227110631828" style="zoom: 67%;" />

#### (4) 三维或立体电影

* 三维电影原理：利用双眼立体视觉原理，使观众能从银幕上获得三维空间感视觉影像的电影
* 三维电影制作：
	* 双镜头摄影机＋偏振片眼镜：《食人鱼》等
	* CGI（computer-generated imagery）＋偏振片眼镜：《阿凡达》

* 四维电影：在立体电影的基础上加环境特效模拟仿真而组成的新型影视产品

#### (5) 其他显示输出设备

* 平面打印机
	* 针式
	* 喷墨
	* 激光
* 3D打印机
* 切割机
* 数控机床

## (二) 2D图形

* 有数学坐标表达的，由点、线、区域等要素所构成的集合对象

![image-20200227111148957](/assets/images/2D图形的光栅化.assets/image-20200227111148957.png)

## (三) 2D图形的光栅化

### 1、线段的光栅化

* 首先考虑端点坐标为整数的线段

$$
m=\frac{Dy}{Dx}
$$

<img src="/assets/images/2D图形的光栅化.assets/image-20200227111501130.png" alt="image-20200227111501130" style="zoom: 67%;" />

#### (1) DDA算法

* DDA: Digital Differential Analyzer 数字微分分析法

	* 直线$ y = mx + h$满足微分方程$ \frac{dy}{dx} = m = \frac{Dy}{Dx} =\frac{y2 – y1}{x2 – x1}$

* 沿扫描线$Dx=1$

	```c++
	for(x = x1; x<=x2; x++) 
	{
		y+=m;
	 	write_pixel(x, round(y));
	}
	```

	<img src="/assets/images/2D图形的光栅化.assets/image-20200227111726726.png" alt="image-20200227111726726" style="zoom:50%;" />

* 对于每个$x$画出最接近的整数$y$

* 问题：斜率大的直线

	<img src="/assets/images/2D图形的光栅化.assets/image-20200227111809275.png" alt="image-20200227111809275" style="zoom:50%;" />

	* 解决：利用对称性，交换$x$和$y$的角色

#### (2) Bresenham算法

* 简介
	* DDA算法中每一步需要一次浮点加法
	* 在Bresenham算法中可以不出现任何浮点运算
	* 只考虑0 £ m £1的情形
	* 其它情形利用对称性处理
	* 假设像素中心在半整数处
	* 如果从一个已被确定激活的像素出发，那么下一像素的可能位置只会有两种可能

* 可能像素

	<img src="/assets/images/2D图形的光栅化.assets/image-20200227111959749.png" alt="image-20200227111959749" style="zoom: 67%;" />

* 决策变量

	<img src="/assets/images/2D图形的光栅化.assets/image-20200227112026416.png" alt="image-20200227112026416" style="zoom:67%;" />

* 增量形式

	* 如果基于第$k$步的决策变量$dk$表示第$k+1$步的决策变量，可以使算法更有效：

		 $d_{k+1} = d_k – 2 D_y$, 若$ d_k >0$;
		$ d_{k+1} = d_k – 2(D_y – D_x)$, 否则

	* 对每个$x$值，只需要进行整数加法以及测试

	* 可以在图形芯片上用单个指令实现

#### (3) 硬件实现

* 线段的光栅化已成熟，并已由硬件实现

### 2、多边形区域的光栅化

#### (1) 内外检测：奇偶检测法（射线法）

* 从一点p引射线，如果与多边形边界交点数为偶数，则p在多边形外，否则在多边形内部

<img src="/assets/images/2D图形的光栅化.assets/image-20200227112421088.png" alt="image-20200227112421088" style="zoom:67%;" />

#### (2) 扫描线转化算法

* 通过维持一个特别的数据结构（结构中保存扫描线与多边形的交点）进行填充
	* 按扫描线进行排序
	* 逐扫描线跨距进行填充

<img src="/assets/images/2D图形的光栅化.assets/image-20200227112554692.png" alt="image-20200227112554692" style="zoom:67%;" />

* 数据结构

<img src="/assets/images/2D图形的光栅化.assets/image-20200227112612709.png" alt="image-20200227112612709" style="zoom:50%;" />

#### (3) 硬件实现

* 多边形区域的光栅化已成熟，并已由硬件实现

### 3、光滑曲线的光栅化

#### (1) 圆的光栅化算法

* 特殊算法：圆的方程及其八分对称性

<img src="/assets/images/2D图形的光栅化.assets/image-20200227112805397.png" alt="image-20200227112805397" style="zoom:67%;" />

* 圆的光栅化算法
	* 中点法
		* Bresenham算法
	* 正负判定法

#### (2) 一般曲线的光栅化

* 曲线的离散：采样

	<img src="/assets/images/2D图形的光栅化.assets/image-20200227112955544.png" alt="image-20200227112955544" style="zoom:67%;" />

### 4、反走样

#### (1) 图形光栅化的走样(Aliasing)

* 锯齿现象

	![image-20200227113113878](/assets/images/2D图形的光栅化.assets/image-20200227113113878.png)
	
* 走样现象的缓解

	* 引入中间颜色值，缓解视觉突兀感

	![image-20200227113158816](/assets/images/2D图形的光栅化.assets/image-20200227113158816.png)

* 数学本质：

	* 欠采样导致走样现象
	* 使用低通滤波去掉高频信息
		* 卷积的离散计算

	<img src="/assets/images/2D图形的光栅化.assets/image-20200227113331310.png" alt="image-20200227113331310" style="zoom: 50%;" />

## (四) 图形与图像的区别

#### 1、光栅图像vs矢量图形

<img src="/assets/images/2D图形的光栅化.assets/image-20200227113522228.png" alt="image-20200227113522228" style="zoom:67%;" />

#### 2、栅格图像与矢量图形

<img src="/assets/images/2D图形的光栅化.assets/image-20200227113546240.png" alt="image-20200227113546240" style="zoom: 67%;" />

#### 3、图像vs图形

![image-20200227113702858](/assets/images/2D图形的光栅化.assets/image-20200227113702858.png)

