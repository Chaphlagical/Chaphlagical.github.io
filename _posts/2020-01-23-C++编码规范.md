---
title: C++编码规范
tags: C++
article_header:
  type: cover
  image:
    src: /assets/images/C++.jpg
---

<!--more-->

## 一、文件结构

每个C++/C程序通常分为两个文件。一个文件用于保存程序的声明（declaration），称为头文件。另一个文件用于保存程序的实现（implementation），称为定义（definition）文件。

C++/C程序的头文件以“.h”为后缀，C程序的定义文件以“.c”为后缀，C++程序的定义文件通常以“.cpp”为后缀（也有一些系统以“.cc”或“.cxx”为后缀）。

### (一) 文件信息声明

文件信息声明位于头文件和定义文件的开头（参见示例1-1），主要内容有：

（1）   版权信息；

（2）   文件名称，项目代码，摘要，参考文献；

（3）   当前版本号，作者/修改者，完成日期；

（4）   版本历史信息；

（5）   主要函数描述。

```c++
//示例1-1
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
// Copyright (c) 2003, Internet Graphics group, Microsoft Research Asia
// All rights reserved.
//
// Filename     ：filename.h
// Project Code ：The project code about this file
// Abstract     ：Describe the content of this file summarily
// Reference    ：......
//
// Version      ：1.1
// Author       ：the name of author(mender)
// Accomplished date ： December 2nd , 2003
//
// Replaced version  :  1.0 
// Original Author   : the name of original author(mender)
// Accomplished date : November 2nd , 2003
//
// Main functions    ：
//	Function 1 Return code	    Function name(Parameter Explain)
//	Function 2 Return code	    Function name(Parameter Explain)
//	...
//	Function n Return code	    Function name(Parameter Explain)
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
```

**【规则1.1-1】** 文件信息声明以两行斜杠开始，以两行斜杠结束，每一行都以两个斜杠开始；

**【规则1.1-2】** 文件信息声明包含五个部分，各部分之间以一空行间隔；

**【规则1.1-3】**   在主要函数部分描述了文件所包含的主要函数的声明信息，如果是头文件，这一部分是可以省略的。

### (二) 头文件结构

头文件由三部分内容组成： 

(1)  头文件开头处的文件信息声明(参见示例1-1)；

(2)  预处理块；

(3)  函数和类结构声明等。

假设头文件名称为 filesystem.h，头文件的结构参见示例1-2。

 

**【规则1.2-1】**   为了防止头文件被重复引用，应当用ifndef/define/endif结构产生预处理块；“#ifndef”或者“#define”后以TAB键代替SPACE键做空格；如果头文件名称是由多个单词组成，则各单词间以下划线“_”连接，例如有头文件名称为“filesystem.h”，则定义如下：“#ifndef _FILE_SYSTEM_H_”；

**【规则1.2-2】**   用 #include <filename.h> 格式来引用标准库的头文件(编译器将从标准库目录开始搜索)；

**【规则1.2-3】**   用 #include “filename.h” 格式来引用非标准库的头文件(编译器将从用户的工作目录开始搜索)；

**【建议1.2-1】**   头文件中只存放“声明”而不存放“定义”；

**【建议1.2-1】**   头文件中应包含所有定义文件所定义的函数声明，如果一个头文件对应多个定义文件，则不同定义文件内实现的函数要分开声明，并作注释以解释所声明的函数从属于那一个定义文件；

**【建议1.2-3】**   宏定义和函数声明分离，在两个头文件中定义，如果没有类成员函数，可以将类和结构的定义与函数声明分离，也就是说一个头文件专用于宏定义，一个头文件专用于类和结构的定义，一个头文件专用于函数声明；

**【建议1.2-4】**   在C++ 语法中，类的成员函数可以在声明的同时被定义，并且自动成为内联函数。这虽然会带来书写上的方便，但却造成了风格不一致，弊大于利。建议将成员函数的定义与声明分开，不论该函数体有多么小。

头文件的结构如下：

```c++
//示例1-2
//文件信息声明见示例1-1，此处省略。 
#ifndef	_FILE_SYSTEM_H_	//avoid referencing the file filesystem.h repeat
#define	_FILE_SYSTEM_H_

#include <math.h>		//reference standard head file
…
#include “myheader.h” 	//reference non-standard head file
…
void Function1(…);		//global function declare
…
class CBox			    //class structure decalre
{
…
};
#endif

```

### (三) 定义文件的结构

定义文件有三部分内容：

(1)  定义文件开头处的文件信息声明(参见示例1-1)；

(2)  对一些头文件的引用；

(3)  程序的实现体（包括数据和代码）。

假设定义文件的名称为 filesystem.c，定义文件的结构如下。

```c++
//示例1-3
#include “filesystem.h”	//reference a head file
…

//global function realization
void Function1(…)
{
…
}
 
//class member function realization
void CBox::Draw(…)
{
…
}

```

### (四) 头文件的作用