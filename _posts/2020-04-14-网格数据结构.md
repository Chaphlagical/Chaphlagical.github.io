---
title: 网格数据结构
tags: 计算机图形学
article_header:
  type: cover
  image:
    src: /assets/images/cg.jpg
---

<!--more-->

## Mesh Data Structure

### Standard Graph Definition

<img src="/assets/images/网格数据结构.assets/image-20200414164000557.png" alt="image-20200414164000557" style="zoom: 67%;" />

### Connectivity

<img src="/assets/images/网格数据结构.assets/image-20200414164019520.png" alt="image-20200414164019520" style="zoom: 67%;" />

### Planar Graphs

<img src="/assets/images/网格数据结构.assets/image-20200414164044408.png" alt="image-20200414164044408" style="zoom:67%;" />

### Triangulation

<img src="/assets/images/网格数据结构.assets/image-20200414164105986.png" alt="image-20200414164105986" style="zoom:67%;" />

### Duality

<img src="/assets/images/网格数据结构.assets/image-20200414164120709.png" alt="image-20200414164120709" style="zoom:67%;" />

## 三维曲面

#### 三维物体的表面

* 二次曲面
	* 球面、抛物线
* 立方体
* 圆柱体
* 复杂物体

### 数学表达

<img src="/assets/images/网格数据结构.assets/image-20200414164316324.png" alt="image-20200414164316324" style="zoom:67%;" />

### 多面体网格模型

* 每个面为平面多边形

<img src="/assets/images/网格数据结构.assets/image-20200414164355222.png" alt="image-20200414164355222" style="zoom:67%;" />

### 正多面体

<img src="/assets/images/网格数据结构.assets/image-20200414164408031.png" alt="image-20200414164408031" style="zoom:67%;" />

### Euler公式

* 对于简单多面体：
	$$
	V+F-E=2
	$$

	* 顶点数：$V$，面数：$F$，边数：$E$
	* 例如，立方体：$V=8,F=6,E=12$

* 如果多面体不是简单的，在面上有$H$个洞，通
	过多面体的洞有$G$个，那么
	$$
	V + F – E = 2 + H – 2G  
	$$

* Euler公式示例：

	<img src="/assets/images/网格数据结构.assets/image-20200414164601398.png" alt="image-20200414164601398" style="zoom:67%;" />

### Graph Embedding

<img src="/assets/images/网格数据结构.assets/image-20200414164630900.png" alt="image-20200414164630900" style="zoom:67%;" />

### Planar Graph and Meshes

<img src="/assets/images/网格数据结构.assets/image-20200414164703761.png" alt="image-20200414164703761" style="zoom:67%;" />

### Meshes

<img src="/assets/images/网格数据结构.assets/image-20200414164718141.png" alt="image-20200414164718141" style="zoom:67%;" />

### Wavefront OBJ File Format

* Vertices
	* Start with char ‘v’
	*  (x,y,z) coordinates
* Faces
	* Start with char ‘f’
	* Indices of its vertices in the file
* Other properties
	* Normal, texture coordinates, material, etc.  

```
v 1.0 0.0 0.0
v 0.0 1.0 0.0
v 0.0 -1.0 0.0
v 0.0 0.0 1.0
f 1 2 3
f 1 4 2
f 3 2 4
f 1 3 4
```

## Mesh Data Structure

### Uses of Mesh Data  

* Rendering
	* Triangle trip
* Geometry queries\
	* What are the vertices of face #k?
	* Are vertices #i and #j adjacent?
	* Which faces are adjacent face #k?
* Geometry operations
	* Remove/add a vertex/face
	* Mesh simplification
	* Vertex split, edge collapse  

### Storing Mesh Data

* Storage of generic meshes
	* Hard to implement efficiently
* Assume
	* Triangular
	* Orientable
	* Manifold  
* How “good” is a data structure?
	* Space complexity
	* Time
		* Time to construct - preprocessing
		* Time to answer a query
		* Time to perform an operation (update the data structure)
	* Trade-off between time and space
	* Redundancy  

### Define a Mesh

* Geometry
	* Vertex coordinates
* Connectivity
	* How do vertices connected?  
* List of Edge
* Vertex-Edge
* Vertex-Face
* Combined  

### 3D Mesh Surface

* Surface & material properties
	* Material color
	* Ambient, hightlight coefficients
	* Texture coordinates
	* BRDF, BTF
* Rendering properties
	* Lighting
	* Normals
	* Rendering modes  

### General Used Mesh Files

* General used mesh files
	* Wavefront OBJ (\*.obj)
	* 3D Max (\*.max, \*.3ds)
	* VRML(\*.vrl)
	* Inventor (\*.iv)
	* PLY (\*.ply, \*.ply2)
	* User-defined(\*.m, \*.liu)
* Storage
	* Text – (Recommended)
	* Binary  

## 半边结构

### Half-edge data structure

<img src="/assets/images/网格数据结构.assets/image-20200414165458489.png" alt="image-20200414165458489" style="zoom:67%;" />

* List of vertices
	* Position coordinates
* List of faces
	* Triplets of pointers to face vertices (c1,c2,c3)
* Queries:
	* What are the vertices of face #3?
		* Answered in O(1) - checking third triplet
	* Are vertices i and j adjacent?
		* A pass over all faces is necessary – NOT GOOD  

**Analysis**

* Pros:
	* Convenient and efficient (memory wise)
	* Can represent non-manifold meshes
* Cons:
	* Too simple - not enough information on relations between vertices & faces  

## Adjacency Matrix

### Definition

* View mesh as connected graph
* Given n vertices build n\*n matrix of adjacency information
	* Entry (i,j) is TRUE value if vertices i and j are adjacent
* Geometric info
	* list of vertex coordinates
* Add faces
	* list of triplets of vertex indices (v1,v2,v3)  

### Queries

* What are the vertices of face #3?
	* O(1) – checking third triplet of faces
* Are vertices i and j adjacent?
	* O(1) - checking adjacency matrix at location (i,j).
* Which faces are adjacent to vertex j?
	* Full pass on all faces is necessary  

### Analysis

* Pros:
	* Information on vertices adjacency
	* Stores non-manifold meshes
* Cons:
* Connects faces to their vertices, BUT NO connection between vertex and its face  

## Doubly-Connected Edge List (DCEL)

* Record for each face, edge and vertex:
	* Geometric information
	* Topological information
	* Attribute information
* Half-Edge Structure  

### Record

<img src="/assets/images/网格数据结构.assets/image-20200414190958188.png" alt="image-20200414190958188" style="zoom:67%;" />

<img src="/assets/images/网格数据结构.assets/image-20200414191017026.png" alt="image-20200414191017026" style="zoom:67%;" />

### Example

<img src="/assets/images/网格数据结构.assets/image-20200414191128671.png" alt="image-20200414191128671" style="zoom:67%;" />

### Analysis

* Pros
	* All queries in O(1) time
	* All operations are O(1) (usually)
* Cons
	* Represents only manifold meshes  

## Corner Table

<img src="/assets/images/网格数据结构.assets/image-20200414191107296.png" alt="image-20200414191107296" style="zoom:67%;" />

### Example

<img src="/assets/images/网格数据结构.assets/image-20200414191147870.png" alt="image-20200414191147870" style="zoom:67%;" />

### Queries

<img src="/assets/images/网格数据结构.assets/image-20200414191205777.png" alt="image-20200414191205777" style="zoom:67%;" />

### Analysis

* Pros
	* All queries in O(1) time
	* All operations are O(1) (usually)
* Cons
	* Represents only manifold meshes
	* High redundancy (but not too high …)  