---
bg: "2019-10-11.jpg"
layout: post
title:  "Ubuntu下载代理设置"
crawlertitle: "Ubuntu下载代理设置"
summary: "Ubuntu下载代理设置"
date:   2019-10-11 07:10:21 +0700
categories: posts
tags: ['计算机网络']
author: Chaf
---

之前配好了ss发现apt、wget、git clone外网资源还是慢，于是调研了以下下载的代理设置。

## 一、apt的网络代理

### 1、临时设置

在命令行键入：

```shell
export http_proxy=http://yourproxyaddress:proxyport
```

### 2、修改`apt.conf`文件

```sell
sudo gedit /etc/apt/apt.conf
```

 在您的apt.conf文件中加入下面这行（根据你的实际情况替换yourproxyaddress和proxyport）。

```shell
 Acquire::http::Proxy "http://yourproxyaddress:proxyport";

 Acquire::ftp::proxy "ftp://127.0.0.1:8000/";

 Acquire::https::proxy "https://127.0.0.1:8000/";
```


 保存apt.conf文件。

### 3、修改`~/.bashrc`文件

如果希望apt-get和其他应用程序如wget等都使用http代理，可以使用这种方式。

```shell
gedit ~/.bashrc
```

在您的`.bashrc`文件末尾添加如下内容（根据你的实际情况替换yourproxyaddress和proxyport）。

```shell
export http_proxy=http://yourproxyaddress:proxyport
```

保存文件。关闭当前终端，然后打开另一个终端。

如果使用shadowsocks代理应使用：

```shell
export ALL_PROXY=socks5://127.0.0.1:1080
```

## 二、wget的网络代理

### 1、修改环境变量

同apt的网络代理

### 2、修改配置文件

为wget使用代理，可以直接修改`/etc/wgetrc`，也可以在主文件夹下新建`.wgetrc`，并编辑相应内容，本文采用后者。

将`/etc/wgetrc`中与proxy有关的几行复制到`~/.wgetrc`，并做如下修改：

```
#You can set the default proxies for Wget to use for http, https, and ftp.
# They will override the value in the environment.
https_proxy = http://127.0.0.1:8087/
http_proxy = http://127.0.0.1:8087/
ftp_proxy = http://127.0.0.1:8087/

# If you do not want to use proxy at all, set this to off.
use_proxy = on
```

 这里 use_proxy = on 开启了代理，如果不想使用代理，每次都修改此文件未免麻烦，我们可以在命令中使用-Y参数来临时设置：

```
-Y, --proxy=on/off           打开或关闭代理
```

### 3、设置`-e`参数

wget本身没有专门设置代理的命令行参数，但是有一个"-e"参数，可以在命令行上指定一个原本出现在".wgetrc"中的设置。于是可以变相在命令行上指定代理：

```shell
-e, --execute=COMMAND   执行`.wgetrc'格式的命令
```

例如：

```shell
wget -c -r -np -k -L -p -e "http_proxy=http://127.0.0.1:8087" http://www.subversion.org.cn/svnbook/1.4/
```

## 三、Git的网络代理

对使用ss代理的

```shell
git config --global http.proxy 'socks5://127.0.0.1:1080'
git config --global https.proxy 'socks5://127.0.0.1:1080'
git config --global https.proxy http://127.0.0.1:1080
 git config --global https.proxy https://127.0.0.1:1080
```

取消：

```shell
git config --global --unset http.proxy

git config --global --unset https.proxy
```

