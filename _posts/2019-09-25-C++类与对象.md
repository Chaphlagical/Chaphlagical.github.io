---
bg: "2019-09-25.jpg"
layout: post
title:  "C++的类和对象"
crawlertitle: "C++的类和对象"
summary: "C++的类和对象"
date:   2019-09-25 08:26:48 +0700
categories: posts
tags: ['C++学习']
author: Chaf
---

C++中类与对象简介

# 一、类的定义

类定义是以关键字 **class** 开头，后跟类的名称。类的主体是包含在一对花括号中。类定义后必须跟着一个分号或一个声明列表。例如，我们使用关键字 **class** 定义 Box 数据类型，如下所示：

```c++
class Box{
   public:
      double length;   // 盒子的长度
      double breadth;  // 盒子的宽度
      double height;   // 盒子的高度
};
```

# 二、定义C++对象

```c++
Box Box1;          // 声明 Box1，类型为 Box
Box Box2;          // 声明 Box2，类型为 Box
```

# 三、访问数据成员

类的对象的公共数据成员可以使用直接成员访问运算符 (.) 来访问

```c++
Box1.length
Box1.breadth
Box1.height
```

# 四、<span id='topic'>类&对象详解</span>

|                             概念                             | 描述                                                         |
| :----------------------------------------------------------: | :----------------------------------------------------------- |
|                  [类成员函数](#类成员函数)                   | 类的成员函数是指那些把定义和原型写在类定义内部的函数，就像类定义中的其他变量一样。 |
|                [类访问修饰符](#类访问修饰符)                 | 类成员可以被定义为 public、private 或 protected。默认情况下是定义为 private。 |
|         [构造函数 & 析构函数](#构造函数 & 析构函数)          | 类的构造函数是一种特殊的函数，在创建一个新的对象时调用。类的析构函数也是一种特殊的函数，在删除所创建的对象时调用。 |
| [拷贝构造函数](https://www.runoob.com/cplusplus/cpp-copy-constructor.html) | 拷贝构造函数，是一种特殊的构造函数，它在创建对象时，是使用同一类中之前创建的对象来初始化新创建的对象。 |
| [友元函数](https://www.runoob.com/cplusplus/cpp-friend-functions.html) | **友元函数**可以访问类的 private 和 protected 成员。         |
| [内联函数](https://www.runoob.com/cplusplus/cpp-inline-functions.html) | 通过内联函数，编译器试图在调用函数的地方扩展函数体中的代码。 |
| [this 指针](https://www.runoob.com/cplusplus/cpp-this-pointer.html) | 每个对象都有一个特殊的指针 **this**，它指向对象本身。        |
| [指向类的指针](https://www.runoob.com/cplusplus/cpp-pointer-to-class.html) | 指向类的指针方式如同指向结构的指针。实际上，类可以看成是一个带有函数的结构。 |
| [静态成员](https://www.runoob.com/cplusplus/cpp-static-members.html) | 类的数据成员和函数成员都可以被声明为静态的。                 |

## (一) <span id='类成员函数'>类成员函数</span>

类的成员函数是指那些把定义和原型写在类定义内部的函数，就像类定义中的其他变量一样。类成员函数是类的一个成员，它可以操作类的任意对象，可以访问对象中的所有成员。

```c++
class Box{
   public:
      double length;         // 长度
      double breadth;        // 宽度
      double height;         // 高度
      double getVolume(void);// 返回体积
};
```

成员函数可以在类定义内部定义：

```c++
class Box{
   public:
      double length;      // 长度
      double breadth;     // 宽度
      double height;      // 高度
   
      double getVolume(void)
      {
         return length * breadth * height;
      }
};
```

也可以在外部用范围解析运算符::进行定义（在 :: 运算符之前必须使用类名）：

```c++
double Box::getVolume(void){
    return length * breadth * height;
}
```

调用成员函数是在对象上使用点运算符（**.**），如：

```c++
Box myBox;          // 创建一个对象
 
myBox.getVolume();  // 调用该对象的成员函数
```

**例程：**

```c++
#include <iostream>
 
using namespace std;
 
class Box{
   public:
      double length;         // 长度
      double breadth;        // 宽度
      double height;         // 高度
 
      // 成员函数声明
      double getVolume(void);
      void setLength( double len );
      void setBreadth( double bre );
      void setHeight( double hei );
};
 
// 成员函数定义
double Box::getVolume(void){
    return length * breadth * height;
}
 
void Box::setLength( double len ){
    length = len;
}
 
void Box::setBreadth( double bre ){
    breadth = bre;
}
 
void Box::setHeight( double hei ){
    height = hei;
}
 
// 程序的主函数
int main( ){
   Box Box1;                // 声明 Box1，类型为 Box
   Box Box2;                // 声明 Box2，类型为 Box
   double volume = 0.0;     // 用于存储体积
 
   // box 1 详述
   Box1.setLength(6.0); 
   Box1.setBreadth(7.0); 
   Box1.setHeight(5.0);
 
   // box 2 详述
   Box2.setLength(12.0); 
   Box2.setBreadth(13.0); 
   Box2.setHeight(10.0);
 
   // box 1 的体积
   volume = Box1.getVolume();
   cout << "Box1 的体积：" << volume <<endl;
 
   // box 2 的体积
   volume = Box2.getVolume();
   cout << "Box2 的体积：" << volume <<endl;
   return 0;
}
```

输出结果：

```c++
Box1 的体积：210
Box2 的体积：1560
```

[返回](#topic)

## (二)  <span id="类访问修饰符">类访问修饰符</span>

类成员的访问限制是通过在类主体内部对各个区域标记 **public、private、protected** 来指定的。关键字 **public、private、protected** 称为访问修饰符。

一个类可以有多个 public、protected 或 private 标记区域。每个标记区域在下一个标记区域开始之前或者在遇到类主体结束右括号之前都是有效的。成员和类的默认访问修饰符是 private。

```c++
class Base {
 
   public:
 
  // 公有成员
 
   protected:
 
  // 受保护成员
 
   private:
 
  // 私有成员
 
};
```

### 公有（public）成员

**公有成员**在程序中类的外部是可访问的。您可以不使用任何成员函数来设置和获取公有变量的值，如下所示：

```c++
#include <iostream>
 
using namespace std;
 
class Line{
   public:
      double length;
      void setLength( double len );
      double getLength( void );
};
 
// 成员函数定义
double Line::getLength(void){
    return length ;
}
 
void Line::setLength( double len ){
    length = len;
}
 
// 程序的主函数
int main( ){
   Line line;
 
   // 使用成员函数设置长度
   line.setLength(6.0); 
   cout << "Length of line : " << line.getLength() <<endl;
 
   // 不使用成员函数设置长度
   line.length = 10.0; // OK: 因为 length 是公有的
   cout << "Length of line : " << line.length <<endl;
   return 0;
}
```

输出结果为：

```shell
Length of line : 6
Length of line : 10
```

### 私有（private）成员

**私有成员**变量或函数在类的外部是不可访问的，甚至是不可查看的。只有类和友元函数可以访问私有成员。

默认情况下，类的所有成员都是私有的。例如：

```c++
#include <iostream>
 
using namespace std;
 
class Box{
   public://公有成员
      double length;
      void setWidth( double wid );
      double getWidth( void );
 
   private://私有成员
      double width;
};
 
// 成员函数定义
double Box::getWidth(void){
    return width ;
}
 
void Box::setWidth( double wid ){
    width = wid;
}
 
// 程序的主函数
int main( ){
   Box box;
 
   // 不使用成员函数设置长度
   box.length = 10.0; // OK: 因为 length 是公有的
   cout << "Length of box : " << box.length <<endl;
 
   // 不使用成员函数设置宽度
   // box.width = 10.0; // Error: 因为 width 是私有的
   box.setWidth(10.0);  // 使用成员函数设置宽度
   cout << "Width of box : " << box.getWidth() <<endl;
 
   return 0;
}
```

输出结果：

```shell
Length of box : 10
Width of box : 10
```

### 保护（protected）成员

**保护成员**变量或函数与私有成员十分相似，但有一点不同，保护成员在派生类（即子类）中是可访问的。

### 继承中的特点

有public, protected, private三种继承方式，它们相应地改变了基类成员的访问属性:

1. **public 继承：**基类 public 成员，protected 成员，private 成员的访问属性在派生类中分别变成：public, protected, private
2. **protected 继承：**基类 public 成员，protected 成员，private 成员的访问属性在派生类中分别变成：protected, protected, private
3. **private 继承：**基类 public 成员，protected 成员，private 成员的访问属性在派生类中分别变成：private, private, private

| 继承方式      | 基类的public成员  | 基类的protected成员 | 基类的private成员 | 继承引起的访问控制关系变化概括         |
| :------------ | :---------------- | :------------------ | :---------------- | :------------------------------------- |
| public继承    | 仍为public成员    | 仍为protected成员   | 不可见            | 基类的非私有成员在子类的访问属性不变   |
| protected继承 | 变为protected成员 | 变为protected成员   | 不可见            | 基类的非私有成员都为子类的保护成员     |
| private继承   | 变为private成员   | 变为private成员     | 不可见            | 基类中的非私有成员都称为子类的私有成员 |

[返回](#topic)

## (三)<span id='构造函数 & 析构函数'>构造函数 & 析构函数</span>

类的**构造函数**是类的一种特殊的成员函数，它会在每次创建类的新对象时执行。

构造函数的名称与类的名称是完全相同的，并且不会返回任何类型，也不会返回 void。构造函数可用于为某些成员变量设置初始值。

例程：

```c++
#include <iostream>
 
using namespace std;
 
class Line{
   public:
      void setLength( double len );
      double getLength( void );
      Line();  // 这是构造函数
 
   private:
      double length;
};
 
// 成员函数定义，包括构造函数
Line::Line(void){
    cout << "Object is being created" << endl;
}
 
void Line::setLength( double len ){
    length = len;
}
 
double Line::getLength( void ){
    return length;
}
// 程序的主函数
int main( ){
   Line line;
 
   // 设置长度
   line.setLength(6.0); 
   cout << "Length of line : " << line.getLength() <<endl;
 
   return 0;
}
```

