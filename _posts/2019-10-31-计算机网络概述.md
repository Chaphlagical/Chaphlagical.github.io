---
bg: "computer_network.jpg"
layout: post
title:  "计算机网络概述"
crawlertitle: "计算机网络概述"
summary: "计算机网络概述"
date:   2019-10-31 08:10:31 +0700
categories: posts
tags: ['计算机网络']
author: Chaf
---

《计算机网络：自顶向下方法》第一章整理

## 一、因特网

### (一) 具体构成描述

#### 1、网络图结构

##### (1) 节点

* 主机及其上运行的应用程序
* 路由器、交换机等网络交换设备  

##### (2) 边（通信链路）

* 接入网链路：主机连接到互联网的链路  
* 主干链路：路由器间的链路  


### 2、端系统-端系统的连接（通信链路、分组交换机）

#### (1) 通信链路

* **物理媒体**：同轴电缆、铜线、光纤和无线电频谱
* **传输速率**：bit/s或bps
* **分组**：当一台端系统要向另外一台端系统发送数据时，发送端将数据分段并为每段加上首部字节。分组通过网络发送到目的端系统，装配成初始数据。

#### (2) 分组交换机

* **路由器**：用于网络核心
* **链路层交换机**：用于接入网

#### (3) 路径

从发送端到接收端系统，一个分组所经历的一系列通信链路和分组交换机称为通过改网络的路径。

### 3、ISP（因特网服务提供商）

#### (1) 示例

住宅区ISP、公司ISP、大学ISP、公共场所WIFI接入ISP等

#### (2) 组成

多台分组交换机和多段通信链路组成的网络

#### (3) 网络接入类型

* DSL住宅宽带接入（线缆调制解调器）

* 高速局域网接入

* 移动无线网接入

### 4、协议（控制因特网中信息接收和发送）

TCP、UDP、IP、HTTP、FTP、PPP、SMTP等

### 5、标准

由IETF（因特网工程任务组）研发

IETF的标准文档称为请求评论(RFC)

### (二) 服务描述

####   1、使用通信设施进行通信的分布式应用

Web、VoIP、email、分布式戏、电子商务、社交网络
…...  

#### 2、  通信基础设施为apps提供编程接口（通信服务）  

* 将发送和接收数据的apps与互联网连接起来
* 为app应用提供服务选择，类
  似于邮政服务：
  * 无连接不可靠服务
  * 面向连接的可靠服务  

### (三) 协议

协议定义了两个或多个通信实体之间交换的报文的格式和顺序，以及报文的发送或接收或其他事件所采取的动作。

* **硬件系统**：协议控制在两块网络接口卡间的“线上”比特流
* **端系统**：拥塞控制协议控制发送方和接收方之间传输的分组发送速率
* **路由器**：协议决定了分组从源到目的地的路径

## 二、网络边缘

### (一) 组成 

#### 1、端系统（主机）

* 运行应用程序
* 如Web、email
* 在 “网络的边缘”  

#### 2、客户/服务器模式

* 客户端向服务器请求、接收服务
* 如Web浏览器/服务器；email客户端/服务器  

#### 3、对等（peer-peer）模式  

* 很少（甚至没有）专门的服务器
* 如 Gnutella、KaZaA、Emule  

### (二) 采用网络设施的面向连接服务

#### 1、目标：在端系统之间传输数据

* 握手：在数据传输之前
  做好准备
  * 人类协议中：你好、你好
  * 两个通信主机之间为连接建立状态 
  
* TCP –传输控制协议（Transmission Control Protocol）

  * Internet上面向连接的服务

#### 2、TCP服务 [RFC 793]

* **可靠地、按顺序地传送数据**：确认和重传
* **流量控制**：发送方不会淹没接收方
* **拥塞控制**：当网络拥塞时，发送方降低发送速率  

#### 3、使用TCP的应用：
HTTP (Web), FTP (文件传送), Telnet (远程登录), SMTP (email)

### (三) 采用基础设施的无连接服务

#### 1、目标：在端系统之间传输数据：无连接服务

* UDP –用户数据报协议(User Datagram Protocol) [RFC 768]:
  * 无连接
  * 不可靠数据传输
  * 无流量控制
  * 无拥塞控制

#### 2、使用UDP的应用

流媒体、远程会议、 DNS、Internet电话  

### (四) 接入网

**接入网**：将端系统物理连接到其边缘路由器的网络

**边缘路由器**：端系统到任何其他远程端系统的路径上的第一台路由器

![](/assets/images/computer_network/1.png)

#### 1、家庭接入

##### (1) 拨号接入 (Modem)

* **将上网数据调制加载到音频信号上，在电话线上传输，在局端将其中的数据解调出来。**
  * 调频
  * 调幅
  * 调相位
  * 综合调制
* **拨号调制解调器**
  * 56kbps的速率直接进入路由器
  * 不能同时打电话和上网

##### (2) 数字用户线

 ![](/assets/images/computer_network/2.png) 

* **ISP**：用户的本地电话公司

* **原理**：每个用户的DSL调制解调器使用现有电话线与位于电话公司的本地中心局中的数字用户线接入复用器（DSLAM）交换数据。DSL线路上的数据被传到互联网；DSL线路上的语音被传到电话网。
* **电话线的资源分配**
  * 电话：0~4kHz
  * 上行数据：4~50kHz
  * 下行数据：50kHz~1MHz
* **传输速率**：
  * 上行传输速率<2.5Mbps（typically <1 Mbps）
  * 下行传输速率<24Mbps（typically <10Mbps）

##### (3) 电缆因特网接入

 ![](/assets/images/computer_network/3.png) 

* **ISP**：提供有线电视服务的公司
* **物理媒介**：混合光纤同轴，有线电视信号电缆双向改造（HFC）
* **特征**：共享广播媒体，各用户共享到线缆头端的接入网络
* **电路交换**（FDM）:在不同频段传输不同信道的数据（数字电视信号和上网数据）
* **传输速率**：
  * 上行传输速率<2Mbps
  * 下行传输速率<30Mbps

##### (4) FTTH （光纤到户）

 ![](/assets/images/computer_network/4.png) 

* 光纤分布体系结构：
  * 主动光纤网络（AON，本质为交换因特网）
  * 被动光纤网络（PON）
* PON分布体系的FTTH原理
  * 每个家庭有一个光纤网络端接器（OLT），由专门的光纤连接到邻近的分配器
  * 分配器把一些家庭集结到一根共享光纤连接到本地电话和公司的中心局中的光纤线路端接器
  * OLT提供光电信号间的转换，经本地电话公司路由器与因特网相连，并经这台路由器接入因特网
  * 在PON体系结构中，所所有从OLT发送到分配器的分组在分配器处复制
* 接入速率：每秒千兆比特范围

##### (5) 卫星链路接入

#### 2、企业（或家庭）接入

##### (1) 以太网

 ![](/assets/images/computer_network/5.png) 

* 以太网用户使用双绞铜线与一台以太网交换机相连
* 传输率：10Mbps、100Mbps、1Gbps、10Gbps
* 服务对象：公司、大学、家庭

##### (2) WiFi

#### 3、广域无线接入

* 由电信运营商提供
* 速率1~10Mpbs
* 种类：3G、4G、LTE

### (五) 物理媒体

**导引型媒体**：电波沿着固体媒体前行，如光缆、双绞铜线或同轴电缆。

**非导引型媒体**：电波在空气或外层空间中传播，例如在无线局域网或数字卫星频道中。

#### 1、双绞铜线（TP）

##### (1) 结构

由两根绝缘的铜线组成。每根约为1mm粗、以规则的螺旋状排列着。

##### (2) 数据传输速率

取决于线的粗细以及传输方和接收方的距离

##### (3) 种类

* 5类：100Mbps Ethernet，Gbps 以太网
* 6类：10Gbps

#### 2、同轴电缆

##### (1) 结构

由两个铜导体同心组成，双向传输

##### (2) 种类

* 基带电缆：
  * **特点**：电缆上单个信道
  * **举例**：Ethernet
* 宽带电缆
  * **特点**：电缆上由多个信道
  * **举例**：HFC

#### 3、光纤

##### (1) 原理

光脉冲，每一个脉冲表示一个bit，在玻璃纤维中传输

##### (2) 特点

* **高速**：点到点的高速传输（如10
  Gps-100Gbps传输速率 ）
* **低误码率**：在两个中继器之
  间可以有很长的距离；不受
  电磁噪声的干扰
* **安全**  

#### 4、陆地无线电通信

* **原理**：无线电信道承载电磁频谱中的信号

* **特点**：不需要安装物理线路，具有穿透墙壁、提供与移动用户的连接以及长距离承载信号的能力

* **局限性**：依赖于传播环境和信号传输的距离
* **传播环境效应**：路径损耗、遮挡衰弱、多径衰弱、干扰、吸收、反射

#### 5、卫星无线电信道

* **地面站**：一颗通信卫星连接地球上的两个或多个微波发射器/接收器
* **原理**：卫星在一个频段上接收传输，使用一个转发器再生信号，并在另外一个频率上发射信号
* **类型**：同步卫星、近地轨道卫星

## 三、网络核心

**网络核心**：由互联因特网端系统的分组交换机和链路构成的网状网络

### (一) 分组交换

**分组**：为了从源端系统向目的端系统发送一个报文，源将长报文划分为较小的数据块

![](/assets/images/computer_network/6.png) 

#### 1、特点

##### (1) 以分组为单位存储-转发方式

* 网络带宽资源不再分分为一个
  个片，传输时使用全部带宽
* 主机之间传输的数据被分为一
  个个分组

##### (2) 资源共享，按需使用：

存储-转发：分组每次移动一跳（ hop ）

* 在转发之前，节点必须收到
  整个分组
* 延迟比线路交换要大
* 排队时间  

#### 2、存储转发传输

![](/assets/images/computer_network/7.png) 

* 被传输到下一个链路之前，
  整个分组必须到达路由器：
  存储-转发
* 在一个速率为$R\ bps$的链路，一个长度为$L\ bits$的分组的存储转发延时： $L/R\ sec$  

#### 3、排队时延和分组丢失

![](/assets/images/computer_network/8.png) 

##### (1) 输出缓存

每台分组交换机有多条链路与之连接，对每条相连的链路，该分组交换机具有一个输出缓存用于存储路由器准备发往那条链路的分组

##### (2) 排队时延

取决于网络的拥塞程度

##### (3) 丢包

  当路由器的缓存用完时，分组将会被抛弃  

#### (4) 过程

如果到达速率>链路的输出速率:

* 分组将会排队，等待传输
* 如果路由器的缓存用完了，分组将会被抛弃  

#### 4、转发表和路由选择协议

![](/assets/images/computer_network/9.png) 

##### (1) 过程

* 当源主机要向目的端系统发送一个分组时，源在该分组的首部包含了目的地的IP地址
* 每台路由器具有一个转发表，用于将目的地址映射成输出链路
* 当某分组到达一台路由器时，路由器检查该地址，利用目的地址搜索其转发表，以发现适当的出链路
* 路由器将分组导向该出链路

##### (2) 路由选择协议

自动设置转发表，决定从每台路由器到每个目的地的最短路径，并利用这些最短路径结果配置路由器中的转发表

#### 5、统计多路复用

![](/assets/images/computer_network/10.png) 

#### 6、分组交换网络

![](/assets/images/computer_network/11.png) 

**分组交换**：分组的存储转发一段一段从源端传到目标端，按照有无网络层的连接，分成 数据报网络和虚电路网络

##### (1) 数据报网络

* **地址**：分组的目标地址决定下一跳，在不同的阶段，路由可以改变
* **举例**：Internent  

* **原理**：
  * 在通信之前,无须建立起一个连接,有数据就传输
  * 每一个分组都独立路由(路径不一样,可能会失序)
  * 路由器根据分组的目标地址进行路由  

![](/assets/images/computer_network/12.png) 

##### (2) 虚电路网络

* **特点**：
  * 每个分组都带标签（虚电路标识 VC ID），标签决定下一跳
  * 在呼叫建立时决定路径，在整个呼叫中路径保持不变
  * 路由器维持每个呼叫的状态信息
* **举例**：X.25和ATM  

* **原理**：

![](/assets/images/computer_network/13.png) 

#### (二) 电路交换

#### 1、为呼叫预留端-端资源

* 链路带宽、交换能力
* 专用资源：不共享
* 保证性能
* 要求建立呼叫连接  

#### 2、网络资源（如带宽）被分成片

* 为呼叫分配片
* 如果某个呼叫没有数据，则其资源片处于空闲状态（不共享）
* 将带宽分成片
  * 频分(Frequencydivision multiplexing)
  * 时分(Time-division multiplexing)
  * 波分(Wave-division multiplexing)  

![](/assets/images/computer_network/14.png) 

```
计算举例：
在一个电路交换网络上，从主机A到主机B发送
一个640,000比特的文件需要多长时间？
*所有的链路速率为1.536 Mbps
*每条链路使用时隙数为24的TDM
*建立端-端的电路需500 ms

每条链路的速率（一个时间片）：1.536Mbps/24 = 64kbps
传输时间：640kb/64kps = 10s
共用时间：传输时间+建立链路时间=10s + 500ms = 10.5s
```

#### 3、局限性（不适合计算机之间的通信）

* 连接建立时间长
* 计算机之间的通信有突发性，如果使用线路交
  换，则浪费的片较多
  * 即使这个呼叫没有数据传递，其所占据的片也不能够被别的呼叫使用
* 可靠性不高  

#### (三) 分组交换与电路交换比较

<div class="mermaid">
graph TD
A[通信网络]
A[通信网络] --> B[电路交换网络]
A[通信网络]--> C[分组交换网络]
B-->D[FDM]
B-->E[TDM]
C-->F[虚电路网络]
C-->G[数据报网络]
</div>

* **分组交换** ：适合对突发式数据传输（资源共享、简单、不必建立呼叫），过度使用会造成网络拥塞（分组延时、丢失）——拥塞控制
* **电路交换**：适合实时服务（如视频会议），不适合计算机之间的通信