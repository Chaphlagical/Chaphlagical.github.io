---
title: 数字图像处理基础
tags: 数字图像处理
article_header:
  type: cover
  image:
    src: /assets/images/DIP.jpg
---

<!--more-->

## 一、图形结构

<img src="/assets/images/数字图像处理基础.assets/image-20200305103155386.png" alt="image-20200305103155386" style="zoom:67%;" />

### 1、领域特性

<img src="/assets/images/数字图像处理基础.assets/image-20200305103237688.png" alt="image-20200305103237688" style="zoom:67%;" />

### 2、边缘

<img src="/assets/images/数字图像处理基础.assets/image-20200305103258435.png" alt="image-20200305103258435" style="zoom:67%;" />

### 3、轮廓

<img src="/assets/images/数字图像处理基础.assets/image-20200305103316275.png" alt="image-20200305103316275" style="zoom:67%;" />

### 4、前景/背景

<img src="/assets/images/数字图像处理基础.assets/image-20200305103334342.png" alt="image-20200305103334342" style="zoom:67%;" />

## 二、图像的空间变换

<img src="/assets/images/数字图像处理基础.assets/image-20200305111656867.png" alt="image-20200305111656867" style="zoom:67%;" />

### (一) 图像的相似性变换

<img src="/assets/images/数字图像处理基础.assets/image-20200305103419306.png" alt="image-20200305103419306" style="zoom:67%;" />

<img src="/assets/images/数字图像处理基础.assets/image-20200305103429069.png" alt="image-20200305103429069" style="zoom:67%;" />


$$
(x',y')=T(x,y)\\
\begin{bmatrix}
x' \\ y'\\ 1
\end{bmatrix}
=T
\begin{bmatrix}
x\\ y\\ 1
\end{bmatrix}
$$

#### 1、图像的平移变换

<img src="/assets/images/数字图像处理基础.assets/image-20200305103620742.png" alt="image-20200305103620742" style="zoom:67%;" />


$$
\begin{align}
&P'=P+\boldsymbol t\\
&\Rightarrow P'\rightarrow \begin{bmatrix}x+t_x\\ y+t_y\\ 1 \end{bmatrix}=\begin{bmatrix}1&0&t_x\\0&1&t_y\\0&0&1 \end{bmatrix}\begin{bmatrix}x\\ y\\ 1\end{bmatrix}
\end{align}
$$

#### 2、图像的尺度变化

<img src="/assets/images/数字图像处理基础.assets/image-20200305103848272.png" alt="image-20200305103848272" style="zoom:67%;" />


$$
\begin{bmatrix}s_x x\\ s_y y\\ 1\end{bmatrix}
=
\begin{bmatrix}s_x&0&0\\ 0&s_y&0\\0&0&1\end{bmatrix}
\begin{bmatrix}x\\ y\\ 1\end{bmatrix}
$$

#### 3、图像的平移+尺度变换

<img src="/assets/images/数字图像处理基础.assets/image-20200305104040428.png" alt="image-20200305104040428" style="zoom:67%;" />


$$
\begin{bmatrix}x''\\ y''\\ 1\end{bmatrix}
=
\begin{bmatrix}1&0&t_x\\0&1&t_y\\0&0&1 \end{bmatrix}
\begin{bmatrix}s_x&0&0\\ 0&s_y&0\\0&0&1\end{bmatrix}
\begin{bmatrix}x\\ y\\ 1\end{bmatrix}
$$

$$
A=\begin{bmatrix}s_x&0&t_x\\ 0&s_y&t_y\\0&0&1\end{bmatrix}
$$

#### 4、图像的旋转变换

<img src="/assets/images/数字图像处理基础.assets/image-20200305104434164.png" alt="image-20200305104434164" style="zoom:67%;" />


$$
\begin{bmatrix}x'\\ y'\\ 1\end{bmatrix}
=
\begin{bmatrix}\cos\theta&-\sin\theta&0\\ \sin\theta&\cos \theta &0 \\0&0&1 \end{bmatrix}
\begin{bmatrix}x\\ y\\ 1\end{bmatrix}
$$

#### 5、图像的旋转+平移+尺度变换

$$
\begin{bmatrix}x'\\ y'\\ 1\end{bmatrix}
=
\begin{bmatrix}\cos\theta&-\sin\theta&0\\ \sin\theta&\cos \theta &0 \\0&0&1 \end{bmatrix}
\begin{bmatrix}1&0&t_x\\0&1&t_y\\0&0&1 \end{bmatrix}
\begin{bmatrix}s_x&0&0\\ 0&s_y&0\\0&0&1\end{bmatrix}
\begin{bmatrix}x\\ y\\ 1\end{bmatrix}
$$

* Rotation matrix
	$$
	\boldsymbol R=\begin{bmatrix}\cos\theta&-\sin\theta&0\\ \sin\theta&\cos \theta &0 \\0&0&1 \end{bmatrix}
	$$

* translation matrix
	$$
	\boldsymbol t=\begin{bmatrix}1&0&t_x\\0&1&t_y\\0&0&1 \end{bmatrix}
	$$

* scaling matrix
	$$
	\boldsymbol S=\begin{bmatrix}s_x&0&0\\ 0&s_y&0\\0&0&1\end{bmatrix}
$$

$$
\begin{bmatrix}x'\\ y' \\ 1\end{bmatrix}=
\begin{bmatrix}\boldsymbol {RS} & \boldsymbol t \\ \boldsymbol 0&1\end{bmatrix}\begin{bmatrix}x\\ y \\ 1\end{bmatrix}
$$
#### 6、空间变换矩阵的解
$$
\begin{bmatrix}x'\\ y'\\ 1\end{bmatrix}
=
\begin{bmatrix}t_{11}&t_{12}&t_{13}\\t_{21}&t_{22}&t_{23}\\
0&0&1\end{bmatrix}
\begin{bmatrix}x\\ y\\ 1\end{bmatrix}
$$

$$
x\cdot t_{11}+y\cdot t_{12}+1\cdot t_{13}+0\cdot t_{21}+0\cdot t_{22}+0\cdot t_{23}=x'\\
0\cdot t_{11}+0\cdot t_{12}+0\cdot t_{13}+x\cdot t_{21}+y\cdot t_{22}+1\cdot t_{23}=y'
$$

$$
\begin{bmatrix}x&y&1&0&0&0\\0&0&0&x&y&1 \end{bmatrix}\begin{bmatrix}t_{11}\\ t_{12}\\ t_{13}\\ t_{21}\\ t_{22}\\ t_{23} \end{bmatrix}=\begin{bmatrix}x'\\ y'\end{bmatrix}
$$
选取$N$对点，得
$$
\begin{bmatrix}x_1&y_1&1&0&0&0\\0&0&0&x_1&y_1&1 \\x_2&y_2&1&0&0&0\\0&0&0&x_2&y_2&1 \\ \vdots\\ x_N&y_N&1&0&0&0\\0&0&0&x_N&y_N&1 \end{bmatrix}\begin{bmatrix}t_{11}\\ t_{12}\\ t_{13}\\ t_{21}\\ t_{22}\\ t_{23} \end{bmatrix}=\begin{bmatrix}x_1'\\ y_1'\\ x'_2\\ y'_2 \\ \vdots \\ x'_N\\ y_N' \end{bmatrix}
$$
表示为
$$
AX=B
$$
若$\det(A)\neq 0$，则
$$
X=A^{-1}B
$$
若$\det(A^TA)\neq 0$，得
$$
X=(A^TA)^{-1}A^TB
$$
### (二) 基于图像插值的空间变换

![image-20200305111827229](/assets/images/数字图像处理基础.assets/image-20200305111827229.png)

<img src="/assets/images/数字图像处理基础.assets/image-20200305111839370.png" alt="image-20200305111839370" style="zoom:50%;" />

#### 1、最近邻插值

**前向映射**

<img src="/assets/images/数字图像处理基础.assets/image-20200305111925234.png" alt="image-20200305111925234" style="zoom: 67%;" />

**后向映射**

<img src="/assets/images/数字图像处理基础.assets/image-20200305111945309.png" alt="image-20200305111945309" style="zoom:67%;" />

#### 2、双线性插值

<img src="/assets/images/数字图像处理基础.assets/image-20200305112042013.png" alt="image-20200305112042013" style="zoom:67%;" />
$$
f(x,y)=ax+by+cxy+d
$$
参数估计：
$$
ax_1+by_1+cx_1y_1+d=f(x_1,y_1)\\
ax_2+by_2+cx_2y_2+d=f(x_2,y_2)\\
ax_3+by_3+cx_3y_3+d=f(x_3,y_3)\\
ax_4+by_4+cx_4y_4+d=f(x_4,y_4)
$$
#### 3、双三次插值
$$
f(x,y)=\sum\limits^N_{i=0}\sum\limits^N_{j=0}a_{ij}x^iy^i
$$
* $f(x,y)$: new location
* $a_{ij}$: estimated from the known neighboring locations

* $N$：Bilinear—1; Bicubic—3

## 三、图像的亮度变换

### 图像亮度变化

<img src="/assets/images/数字图像处理基础.assets/image-20200305112733095.png" alt="image-20200305112733095" style="zoom:50%;" />

### 亮度归一化（尺度变换）
$$
g(x,y)=K\frac{f(x,y)-\min[f(x,y)]}{\max[f(x,y)]-\min[f(x,y)]}
$$
<img src="/assets/images/数字图像处理基础.assets/image-20200305113037443.png" alt="image-20200305113037443" style="zoom:50%;" />

### 亮度局部平均（平滑处理）
$$
g(x,y)=\frac{1}{mn}\sum\limits_{(x',y')\in N_{xy}}f(x',y')
$$
<img src="/assets/images/数字图像处理基础.assets/image-20200305113140750.png" alt="image-20200305113140750" style="zoom: 67%;" />

<img src="/assets/images/数字图像处理基础.assets/image-20200305113206190.png" alt="image-20200305113206190" style="zoom:67%;" />

### 图像取反
$$
g(x,y)=L-1-f(x,y)
$$
<img src="/assets/images/数字图像处理基础.assets/image-20200305113243386.png" alt="image-20200305113243386" style="zoom:67%;" />

### 图像亮度拉伸

<img src="/assets/images/数字图像处理基础.assets/image-20200305113307592.png" alt="image-20200305113307592" style="zoom:67%;" />

### 图像伽马校正
$$
s=cr^\gamma
$$
<img src="/assets/images/数字图像处理基础.assets/image-20200305113339191.png" alt="image-20200305113339191" style="zoom:67%;" />

<img src="/assets/images/数字图像处理基础.assets/image-20200305113348285.png" alt="image-20200305113348285" style="zoom:67%;" />

### 图像直方图

<img src="/assets/images/数字图像处理基础.assets/image-20200305113717201.png" alt="image-20200305113717201" style="zoom:67%;" />

<img src="/assets/images/数字图像处理基础.assets/image-20200305113727876.png" alt="image-20200305113727876" style="zoom:67%;" />

### 彩色图像直方图

<img src="/assets/images/数字图像处理基础.assets/image-20200305113834623.png" alt="image-20200305113834623" style="zoom:67%;" />

### 直方图均衡化

<img src="/assets/images/数字图像处理基础.assets/image-20200305113856845.png" alt="image-20200305113856845" style="zoom:67%;" />

* 通过增加直方图分布区域，提高图像对比度

* 会产生artifact

<img src="/assets/images/数字图像处理基础.assets/image-20200305113908799.png" alt="image-20200305113908799" style="zoom:67%;" />

<img src="/assets/images/数字图像处理基础.assets/image-20200305113918145.png" alt="image-20200305113918145" style="zoom:67%;" />

概率密度函数PDF和累积分布函数CDF的关系：

<img src="/assets/images/数字图像处理基础.assets/image-20200305115033741.png" alt="image-20200305115033741" style="zoom:67%;" />

设随机变量$X$和$Y$，有$Y=T(X)$，直方图均衡化表示为
$$
P_Y(y<Y\leq y+\Delta y)=\sum\limits_i P_X(x_i<X\leq x_i+\Delta x_i)
$$
即$p_Y(y)dy=\sum\limits_ip_X(x_i)dx$

代入$Y$得
$$
dT(x)=\sum\limits_i\frac{p_X(x_i)}{p_Y(y)}dx
$$
积分得
$$
T(x)=\int^x_{-\infity}\frac{p_X(w)}{p_Y(w)}dw
$$
<img src="/assets/images/数字图像处理基础.assets/image-20200305115751307.png" alt="image-20200305115751307" style="zoom:67%;" />

用$p$表示输入图像灰度、$q$表示变换后的输出图像灰度，则根据对均衡化处理的要求，变换后的图像灰度分布$g(q)$应为
$$
g(q)=\frac{N/K}{N}=\frac{1}{K}
$$
这里，$K$是图像的量化灰度级数**，**而$N$为图像中像素的总数目。因此，$N/K$为图像中灰度级为$q$的像素数目。

根据$h(p)$和$g(q)$的分布可确定输出灰度$q$和输入灰度$p$之间的映射关系。设所需的灰度变换关系为
$$
q=f(p)
$$
对灰度变换式两端求微分，有
$$
dq=f'(p)dp
$$
即
$$
f'(p)=\frac{dq}{dp}
$$
这里，$dp$和$dq$分别表示输入灰度和输出灰度的微分区间。由于要求对输入图像进行灰度均衡化变换前后，其相应的微分区间$dp$和$dq$中所包含的像素数应相等，故有 
$$
h(p)dp=g(q)dq
$$
或
$$
\frac{dq}{dp}=\frac{h(p)}{g(p)}
$$
因此有
$$
f'(p)=\frac{dq}{dp}=\frac{h(p)}{g(p)}=Kh(p)
$$
求积分得
$$
f(p)=K\int^p_0 h(p)dp
$$


由于$h(p)$为正值函数，所以，$f(p)$是单值的、并且是单调增加的函数，满足所需要的变换特性

### 直方图规定化

<img src="/assets/images/数字图像处理基础.assets/image-20200305120820625.png" alt="image-20200305120820625" style="zoom:67%;" />